--- a/src/options.c
+++ b/src/options.c
@@ -377,7 +377,7 @@ int options_fromfd(int fd, bstring bt) {
 
 #ifdef ENABLE_CHILLIREDIR
   for (i = 0; i < MAX_REGEX_PASS_THROUGHS; i++) {
-#if defined (__FreeBSD__) || defined (__APPLE__) || defined (__OpenBSD__) || defined (__NetBSD__)
+#if defined (__FreeBSD__) || defined (__APPLE__) || defined (__OpenBSD__) || defined (__NetBSD__) || !defined (__GLIBC__)
     regfree(&_options.regex_pass_throughs[i].re_host);
     regfree(&_options.regex_pass_throughs[i].re_path);
     regfree(&_options.regex_pass_throughs[i].re_qs);
--- a/src/main-redir.c
+++ b/src/main-redir.c
@@ -510,8 +510,10 @@ check_regex(regex_t *re, char *regex, ch
 
 #if defined (__FreeBSD__) || defined (__APPLE__) || defined (__OpenBSD__) || defined (__NetBSD__)
   if (!re->re_g)
-#else
+#elif defined (__GLIBC__)
     if (!re->allocated)
+#else
+    if (!re->__opaque)
 #endif
     {
       if ((ret = regcomp(re, regex, REG_EXTENDED | REG_NOSUB)) != 0) {
