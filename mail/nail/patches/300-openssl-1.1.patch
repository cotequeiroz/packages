--- a/openssl.c
+++ b/openssl.c
@@ -137,7 +137,11 @@ ssl_rand_init(void)
 
 	if ((cp = value("ssl-rand-egd")) != NULL) {
 		cp = expand(cp);
+#if OPENSSL_VERSION_NUMBER >= 0x10100000L
+		if (1) {
+#else
 		if (RAND_egd(cp) == -1) {
+#endif
 			fprintf(stderr, catgets(catd, CATSET, 245,
 				"entropy daemon at \"%s\" not available\n"),
 					cp);
