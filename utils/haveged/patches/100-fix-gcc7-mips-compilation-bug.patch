--- a/src/havegecollect.c
+++ b/src/havegecollect.c
@@ -140,7 +140,11 @@ static LOOP_BRANCH havege_cp(H_COLLECT *
  * Protect the collection mechanism against ever-increasing gcc optimization
  */
 #if defined (GCC_VERSION) && GCC_VERSION >= 40400
+# if defined (__mips) && GCC_VERSION >= 70000
+static int havege_gather(H_COLLECT * h_ctxt) __attribute__((optimize(1),nomips16));
+# else
 static int havege_gather(H_COLLECT * h_ctxt) __attribute__((optimize(1)));
+# endif
 #else
 static int  havege_gather(H_COLLECT * h_ctxt);
 #endif
@@ -317,6 +321,9 @@ static LOOP_BRANCH havege_cp( /* RETURN:
  * The collection loop is constructed by repetitions of oneinteration.h interleaved
  * with control points generated by the LOOP macro.
  */
+#if defined (__mips) && GCC_VERSION >= 70000
+__attribute__((nomips16))     /* avoid a gcc7 bug  specific to mips16 code */
+#endif
 static int havege_gather(     /* RETURN: 1 if initialized    */
    H_COLLECT * h_ctxt)        /* IN:     collector context  */
 {
