--- a/mysys_ssl/openssl.c
+++ b/mysys_ssl/openssl.c
@@ -50,8 +50,8 @@ int check_openssl_compatibility()
   EVP_CIPHER_CTX *evp_ctx;
   EVP_MD_CTX     *md5_ctx;
 
-  if (!CRYPTO_set_mem_functions(coc_malloc, CRYPTO_realloc, CRYPTO_free))
-    return 1;
+  if (!CRYPTO_set_mem_functions(coc_malloc, NULL, NULL))
+    return 0;
 
   testing= 1;
   alloc_size= alloc_count= 0;
